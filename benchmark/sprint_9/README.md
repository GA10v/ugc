## Тесты ClickHouse vs MongoDB

## Запуск тестов

### ClickHouse
1. Перейти в директорию ```$ cd ./clickhouse```
2. Запустить контейнер командой  ```$ docker-compose up -d```
3. Последовательно выполнить скрипты в файле ```sprint_9/test_ch.ipynb```

### MongoDB
1. Перейти в директорию ```$ cd ./mongo```
2. Запустить контейнер командой  ```$ docker-compose up -d```
3. Выполнить скрипт в консоле ```$ sh mongo_config.sh```
4. Последовательно выполнить скрипты в файле ```sprint_9/test_mongo.ipynb```


## Исследование
- Написали класс BaseBenchmark который генерирует тестовые данные и запускает тестирование хранилища
- Написали драверы для каждого хранилища
- Измерили скорость добавления и чтения данных для каждого хранилища
- - Протестировали чтение уже загруженных данных (количество лайков или дизлайков у определённого фильма, средняя пользовательская оценка фильма)
- - Протестировали чтение данных, поступающих в реальном времени (добавление лайка или дизлайка и время появления лайка или дизлайка в сценариях, описанных выше)

Подробные отчеты для каждого хранилища находятся в директорях ```./clickhouse``` и ```./mongo```

## Вывод
Для реализации задач текущего спринта, скорость записи не так важна, как скорость чтения. По результатам тестирования на чтение данных, из базы содержащей более 1_000_000 записей, победу одержал MongoDB с результатом поиска в 0.004 сек. против 0.552 сек. у ClickHouse.
Внутри команды было решено реализовать работу с событиями ```bookmarks```, ```likes``` и ```reviews``` с использованием асинхронного клиента для MongoDB


## Результаты

Тест | MongoDB | Clickhouse
--- |---------| ---
Tecт 1: Тестирование вставки данных о событиях с разным размером батча. (нет записей в таблице) | *       | *
Батч - 1        | 0.05738 | 0.01766
Батч - 10       | 0.00691 | 0.01685
Батч - 100      | 0.02028 | 0.02217
Батч - 1000     | 0.11689 | 0.22511
Батч - 10000    | 0.96733 | 0.74639
Tecт 2: Тестирование поиска данных о событиях. (< 15_000 записей в таблице)| *       | *
       -         | 0.0026 | 0.06883
Tecт 3: Тестирование вставки батча в 1_000_000 записей. (< 15_000 записей в таблице). | *       | *
       -         | 102.30085 | 62.8587
Tecт 4: Тестирование вставки данных о событиях с разным размером батча. (1_000_000 записей в таблице).| *       | *
Батч - 1        | 0.02696 | 0.01103
Батч - 10       | 0.00809 | 0.00833
Батч - 100      | 0.01813 | 0.01505
Батч - 1000     | 0.2175 | 0.11646
Батч - 10000    | 1.30446 | 0.75701
Тест 5: Тестирование поиска данных о событиях. (1_000_000 записей в таблице).| *       | *
       -         | 0.004 | 0.55199
Тест 6: Тестирование обновления данных о событиях. (1_000_000 записей в таблице).| *       | *
       -         | 17.69856 | 0.16358